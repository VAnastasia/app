(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{29:function(e,t,a){e.exports=a.p+"static/media/search-icon.9df51d4e.svg"},30:function(e,t,a){e.exports=a.p+"static/media/down-icon.e35acbe6.svg"},33:function(e,t,a){e.exports=a(63)},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),i=a.n(o),s=(a(38),a(5)),l=a(6),c=a(13),u=a(12),m=a(14),h=(a(39),a(40),a(41),a(9));var d=function(e){var t=e.onClickLogout;return r.a.createElement(h.b,{to:"/",className:"logout",onClick:t},r.a.createElement("span",null,"\u0412\u044b\u0439\u0442\u0438"))};var p=function(e){var t=e.onClickLogout,a=e.userName;return r.a.createElement("header",{className:"header"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,a),r.a.createElement("li",null,r.a.createElement(d,{onClickLogout:t})))))};a(49),a(50);var f=function(e){var t=e.type,a=e.title,n=e.onClick;return r.a.createElement("button",{className:"button",type:t,onClick:n},a)},v=new Intl.DateTimeFormat("ru-RU",{month:"long",day:"numeric"}),g=new Intl.DateTimeFormat("ru-RU",{hour12:!1,hour:"numeric",minute:"numeric"}),E=function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderItems",value:function(e){var t=this.props,a=t.activeNote,n=t.onClickNote;return e.map((function(e){var t=e.id,o=e.title,i=e.date,s=a===t?"notes-item active":"notes-item";return r.a.createElement("li",{className:s,key:t,onClick:function(){return n(t)}},o,r.a.createElement("p",null,function(e){return v.format(e)}(i)," ",function(e){return g.format(e)}(i)))}))}},{key:"render",value:function(){var e=this.props,t=e.notesUser,a=e.onClickAdd,n=this.renderItems(t);return r.a.createElement("div",null,r.a.createElement("ul",{className:"notes-list"},n),r.a.createElement(f,{type:"button",title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443",onClick:a}))}}]),t}(n.Component),b=(a(51),a(29)),N=a.n(b);var S=function(e){var t=e.onSearch;return r.a.createElement("div",{className:"search"},r.a.createElement("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a",name:"search",onChange:t}),r.a.createElement("button",{type:"button"},r.a.createElement("img",{src:N.a,alt:"search",width:"20",height:"20",className:"search__icon"})))},y=(a(52),function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"renderItems",value:function(e){var t=this.props,a=t.activeNote,n=t.onSubmitNote,o=t.onDeleteNote;return e.map((function(e){var t=e.id,i=e.title,s=e.text,l=a===t?"note-details active":"note-details";return r.a.createElement("form",{className:l,method:"post",key:t,onSubmit:n},r.a.createElement("input",{type:"text",name:"title",defaultValue:i}),r.a.createElement("textarea",{name:"text",defaultValue:s}),r.a.createElement("input",{type:"hidden",value:t,name:"id"}),r.a.createElement("div",{className:"note-details__buttons"},r.a.createElement(f,{type:"submit",title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),r.a.createElement(f,{type:"button",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",onClick:function(){return o(t)}})))}))}},{key:"render",value:function(){var e=this.props.notesUser;return r.a.createElement("div",{className:"note-details__container"},this.renderItems(e))}}]),t}(n.Component)),k=(a(53),function(){return r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"lds-css ng-scope"},r.a.createElement("div",{className:"lds-spinner"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))))}),w=a(30),j=a.n(w),C=a(16),O=Object(C.b)("userStore","notesStore")(Object(C.c)(function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sortDate:!0},a.onSortDate=function(){a.setState({sortDate:!a.state.sortDate})},a.onClickNote=function(e){a.props.notesStore.setActiveNote(e)},a.onClickAdd=function(){a.props.notesStore.writeNoteData(a.props.userStore.isAuth,"\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u043c\u0435\u0442\u043a\u0430","",Date.now())},a.onSaveNote=function(e,t,n){a.props.notesStore.updateNoteData(e,t,n)},a.onSubmitNote=function(e){e.preventDefault(),a.onSaveNote(e.target.title.value,e.target.text.value,e.target.id.value)},a.onDeleteNote=function(e){a.props.notesStore.deleteNote(e)},a.onClickLogout=function(){a.props.userStore.onClickLogout(),a.props.notesStore.clearNotes()},a.onSearch=function(e){e.preventDefault(),e.target.value||a.props.notesStore.getNotes();var t=e.target.value.toLowerCase(),n=a.props.notesStore.notes.slice().filter((function(e){return e.title.toLowerCase().indexOf(t)>-1||e.text.toLowerCase().indexOf(t)>-1}));return a.props.notesStore.onSearch(n)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getNotes",value:function(){var e=this.props.notesStore.notes,t=e.slice().sort((function(e,t){return t.date-e.date}));return this.state.sortDate&&(t=e.slice().sort((function(e,t){return t.date-e.date}))),this.state.sortDate||(t=e.slice().sort((function(e,t){return e.date-t.date}))),t}},{key:"componentDidMount",value:function(){this.props.notesStore.getNotes()}},{key:"componentDidUpdate",value:function(){this.getNotes()}},{key:"render",value:function(){var e=this.props.userStore,t=e.isAuth,a=e.userName,n=this.props.notesStore,o=n.isLoading,i=n.activeNote,s=o?r.a.createElement(k,null):null,l=this.state.sortDate?"main__sort down":"main__sort up";return r.a.createElement("div",{className:"main"},r.a.createElement(p,{onClickLogout:this.onClickLogout,isAuth:t,userName:a}),r.a.createElement("main",null,r.a.createElement("div",{className:"main__left-column"},r.a.createElement("h1",null,"\u0412\u0441\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438",r.a.createElement("sup",null,this.getNotes().length)),r.a.createElement("button",{className:l,onClick:this.onSortDate,title:"\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u043f\u043e \u0434\u0430\u0442\u0435"},r.a.createElement("img",{src:j.a,width:"16",height:"16",alt:"up-down"})),r.a.createElement(S,{onSearch:this.onSearch}),r.a.createElement(E,{activeNote:i,onClickNote:this.onClickNote,notesUser:this.getNotes(),onClickAdd:this.onClickAdd})),r.a.createElement("div",{className:"main__right-column"},r.a.createElement(y,{notesUser:this.getNotes(),activeNote:i,onSaveNote:this.onSaveNote,onSubmitNote:this.onSubmitNote,onDeleteNote:this.onDeleteNote}))),s)}}]),t}(n.Component)));a(54);var A=function(){return r.a.createElement("section",{className:"welcome"},r.a.createElement("h1",null,"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"),r.a.createElement("p",null,"\u0412\u0435\u0431-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0434\u043b\u044f \u0445\u0440\u0430\u043d\u0435\u043d\u0438\u044f \u0437\u0430\u043c\u0435\u0442\u043e\u043a"),r.a.createElement("div",null,r.a.createElement(h.b,{to:"/auth"},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement(h.b,{to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))};a(55),a(56);var D=function(e){var t=e.type,a=e.id,n=e.name,o=e.label;return r.a.createElement("p",{className:"field-form"},r.a.createElement("label",{htmlFor:a},o),r.a.createElement("input",{type:t,id:a,name:n,required:!0}))};var I=function(e){var t=e.onSubmitAuth;return r.a.createElement("form",{className:"auth",method:"post",onSubmit:t},r.a.createElement("h1",null,"\u0412\u0445\u043e\u0434"),r.a.createElement(D,{type:"text",id:"auth-login",name:"login",label:"E-mail"}),r.a.createElement(D,{type:"password",id:"auth-password",name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(f,{type:"submit",title:"\u0412\u043e\u0439\u0442\u0438"}),r.a.createElement("p",{className:"bottom"},"\u0415\u0449\u0435 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?",r.a.createElement(h.b,{to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))};a(57);var _=function(e){var t=e.onSubmitRegister;return r.a.createElement("form",{className:"register",method:"post",onSubmit:t},r.a.createElement("h1",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement(D,{type:"text",id:"registerlogin",label:"E-mail"}),r.a.createElement(D,{type:"password",id:"registerpassword",label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),r.a.createElement(f,{type:"submit",title:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),r.a.createElement("p",{className:"bottom"},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?",r.a.createElement(h.b,{to:"/auth"},"\u0412\u043e\u0439\u0442\u0438")))},L=a(15),x=Object(C.b)("userStore","notesStore")(Object(C.c)(function(e){function t(){return Object(s.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.userStore,t=e.isAuth,a=e.isReg,n=e.onSubmitAuth,o=e.onSubmitRegister;return r.a.createElement(h.a,null,r.a.createElement(L.b,{exact:!0,path:"/",component:function(){return t?r.a.createElement(O,null):r.a.createElement(A,null)}}),r.a.createElement(L.b,{path:"/auth",component:function(){return t?r.a.createElement(L.a,{to:"/"}):r.a.createElement(I,{onSubmitAuth:n})}}),r.a.createElement(L.b,{path:"/register",component:function(){return a?r.a.createElement(L.a,{to:"/auth"}):r.a.createElement(_,{onSubmitRegister:o})}}))}}]),t}(n.Component))),U=a(3),R=a(7),F=a.n(R);a(58),a(60),a(65),a(64);F.a.initializeApp({apiKey:"AIzaSyCTaiom0f9oFcpAFmI3tmZk3w22wMNJHWs",authDomain:"my-project-1555925309327.firebaseapp.com",databaseURL:"https://my-project-1555925309327.firebaseio.com",projectId:"my-project-1555925309327",storageBucket:"my-project-1555925309327.appspot.com",messagingSenderId:"423298676480",appId:"1:423298676480:web:185d2a3464b7520d5525e5",measurementId:"G-JTVC7LB6LX"});var B=F.a.database(),J=function(){function e(){var t=this;Object(s.a)(this,e),this.notes=[],this.activeNote=null,this.isLoading=!0,this.setActiveNote=function(e){t.activeNote=e},this.clearNotes=function(){return t.notes=[]},this.onSearch=function(e){t.notes=e}}return Object(l.a)(e,[{key:"getNotes",value:function(){var e=this;this.isLoading=!0,B.ref("notes/").orderByChild("date").once("value").then((function(t){e.notes=[],t.forEach((function(t){if(t.val().userId===localStorage.getItem("user_id")){var a=t.val();a.id=t.key,e.notes.push(a)}})),e.isLoading=!1,e.activeNote=e.notes.length>0?e.notes[e.notes.length-1].id:null})).catch((function(e){var t=e.message;alert(t)}))}},{key:"writeNoteData",value:function(e,t,a,n){F.a.database().ref("notes/").push({userId:e,title:t,text:a,date:n}).catch((function(e){var t=e.message;alert(t)})),this.getNotes()}},{key:"updateNoteData",value:function(e,t,a){F.a.database().ref("notes/"+a).update({title:e,text:t,date:Date.now()}).catch((function(e){var t=e.message;alert(t)})),this.getNotes()}},{key:"deleteNote",value:function(e){F.a.database().ref("notes/"+e).remove().catch((function(e){var t=e.message;alert(t)})),this.getNotes()}}]),e}();Object(U.h)(J,{notes:U.m,isLoading:U.m,activeNote:U.m,clearNotes:U.d,setActiveNote:U.d,getNotes:U.d});var T=new J,M=a(23),V=a.n(M),W=a(32),z=function(){function e(){var t=this;Object(s.a)(this,e),this.isAuth=localStorage.getItem("user_id")?localStorage.getItem("user_id"):null,this.isReg=!1,this.userName=localStorage.getItem("user_name")?localStorage.getItem("user_name"):"",this.onSubmitRegister=function(e){e.preventDefault();var a={email:document.forms[0].elements.registerlogin.value,password:document.forms[0].elements.registerpassword.value};t.registerUser(a)},this.setUser=function(e){t.isAuth=e},this.onClickLogout=function(){t.isAuth=null,t.userName="",t.isReg=!1,localStorage.clear(),t.signOut()},this.onSubmitAuth=function(e){e.preventDefault();var a={email:document.forms[0].elements.login.value,password:document.forms[0].elements.password.value};t.signIn(a),F.a.auth().onAuthStateChanged((function(e){e?(t.isAuth=e.uid,t.userName=e.email,localStorage.setItem("user_id",e.uid),localStorage.setItem("user_name",e.email)):(t.isAuth=null,t.userName="")}))}}return Object(l.a)(e,[{key:"registerUser",value:function(){var e=Object(W.a)(V.a.mark((function e(t){var a,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.next=3,F.a.auth().createUserWithEmailAndPassword(a,n).catch((function(e){var t=e.message;alert(t)}));case 3:e.sent&&(this.isReg=!0);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){F.a.auth().signOut().then((function(){})).catch((function(e){var t=e.message;alert(t)}))}},{key:"signIn",value:function(e){var t=this,a=e.email,n=e.password;F.a.auth().signInWithEmailAndPassword(a,n).catch((function(e){t.isAuth=null,t.userName="",localStorage.clear();var a=e.message;alert(a)}))}}]),e}();Object(U.h)(z,{users:U.m,isAuth:U.m,isReg:U.m,userName:U.m,errorMessage:U.m,setUser:U.d,onClickLogout:U.d,onSubmitAuth:U.d});var P={notesStore:T,userStore:new z};i.a.render(r.a.createElement(C.a,P,r.a.createElement(x,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.4066bb10.chunk.js.map